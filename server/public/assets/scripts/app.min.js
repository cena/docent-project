/*! docentedu 2015-09-23 */
function getResources(){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(a){a.resources.sort(compareAlphabetically),console.log(pageNumber),displayCards(a.resources),makePages(a.resources)}})}function getResourcesByTag(a){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(b){b.resources.sort(compareAlphabetically),displayTag(b.resources,a),displayCards(tagArray),makePages(tagArray)}})}function getResourcesBySubject(a){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(b){b.resources.sort(compareAlphabetically),displaySubject(b.resources,a),displayCards(subjectArray),makePages(subjectArray)}})}function getResourcesByCategory(a){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(b){b.resources.sort(compareAlphabetically),displayCategory(b.resources,a),displayCards(categoryArray),makePages(categoryArray)}})}function compareAlphabetically(a,b){return a.embedName<b.embedName?-1:a.embedName>b.embedName?1:0}function makePages(a){for($(".pageNav").empty(),numOfPages=Math.ceil(a.length/30),pageNumber>1&&$(".pageNav").append('<img class ="arrow" data-page-turn="-1" src="/assets/images/nav_backArrow.svg">'),i=1;i<=numOfPages;i++)$(".pageNav").append("<div data-page="+i+' class="pageNum">'+i+"</div>");pageNumber<numOfPages&&$(".pageNav").append('<img class ="arrow" data-page-turn="1" src="/assets/images/nav_forwardArrow.svg">')}function displayCards(a){$("#cardContainer").empty();for(var b=30*pageNumber-30;b<a.length&&30*pageNumber>b;b++){if(embedName=a[b].embedName,logo=a[b].logo,embedLink=a[b].embedLink?"":a[b].embedName,howto=a[b].howto?a[b].howto:a[b].embedName,description=a[b].description?a[b].description:a[b].embedName,category=a[b].category?"":a[b].embedName,subject=a[b].subject?"":a[b].embedName,id=a[b]._id,console.log(a),null==a[b].tags)tags="";else for(var c=0;c<a[b].tags.length;c++)tags+='<p class="tag">'+a[b].tags[c]+"</p>";var d='<img class="logo" src='+logo+">",e='<main class="col-xs-offset-1 col-xs-12 col-sm-offset-3 col-sm-6 col-md-offset-1 col-md-4 col-lg-offset-0 card"></main>',f='<div class="col-xs-offset-1" id="'+id+'">'+d+"</div>",g='<h4 class="title col-xs-6 col-md-8">'+embedName+"</h4>",h=document.createElement("video");null==h.src?h.src="":h.src=howto,h.autoPlay=!1;var i='<div class="col-xs-offset-1 col-sm-6 col-md-6 video">'+h.src+"</div>",j='<p class="paragraph col-md-offset-1 col-md-10">'+description+"</p>",k=' <img class="col-xs-offset-4 example" src="/assets/images/modalButton.png">',l='<h6 class="tags col-md-3">'+tags+"</h6>";$("#cardContainer").append(e),$(".card").last().append('<div class="row">'+f+g+'</div><div class="row">'+i+'</div><div class="row">'+j+'</div><div class="row">'+k+'</div><div class="row">'+l+"</div>"),$(".example").on("click",function(){var a=id;console.log(id),$("#modal-title").text(a),$("#myModal").modal("show")})}}function displayCategory(a,b){categoryArray=[];for(var c=0;c<a.length;c++)a[c].category===b&&categoryArray.push(a[c]);return categoryArray}function displaySubject(a,b){subjectArray=[];for(var c=0;c<a.length;c++)a[c].subject===b&&subjectArray.push(a[c]);for(var c=0;c<a.length;c++)null==a[c].subject&&subjectArray.push(a[c]);return subjectArray}function displayTag(a,b){tagArray=[];for(var c=0;c<a.length;c++)if(null!==a[c].tags)for(var d=0;d<a[c].tags.length;d++)a[c].tags[d]===b&&tagArray.push(a[c]);return tagArray}function getEmbedExamplesById(){$.ajax({type:"GET",dataType:"json",url:"/resource/:id",success:function(a){console.log(a),activeModal=a.id}})}var embedName="",logo="",embedLink="",howto="",description="",category="",subject="",id="",tags=[],pageNumber=1,activeModal;$(document).ready(function(){$(".navDirectory").on("mouseenter",function(){$(this).find(".sub-nav").slideDown()}),$(".navDirectory").on("mouseleave",function(){$(this).find(".sub-nav").slideUp()}),$(".myModal").on("click",function(){}),$(".delete").on("click",function(){$("#myModal").modal("show")}),$(".newResourceButton").on("click",function(){$("#newModal").modal("show")}),$(".editButton").on("click",function(){$("#newModal").modal("show")}),$("body").on("click",".category",function(a){var b=$(this).text();getResourcesByCategory(b)}),$("body").on("click",".subject",function(a){var b=$(this).text();getResourcesByCategory(b)}),$("body").on("click",".tag",function(){var a=$(this).text();getResourcesByTag(a)}),$("body").on("click",".pageNum",function(){pageNumber=$(this).data("page"),getResources()}),$("body").on("click",".arrow",function(){pageNumber+=$(this).data("page-turn"),getResources()}),getResources()});