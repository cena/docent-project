/*! docentedu 2015-09-21 */
function getResources(){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(a){a.resources.sort(compareAlphabetically),console.log(pageNumber),displayCards(a.resources),makePages(a.resources)}})}function getResourcesByTag(a){$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(b){b.resources.sort(compareAlphabetically),displayTag(b.resources,a),displayCards(tagArray),makePages(tagArray)}})}function compareAlphabetically(a,b){return a.embedName<b.embedName?-1:a.embedName>b.embedName?1:0}function makePages(a){for($(".pageNav").empty(),numOfPages=Math.ceil(a.length/30),pageNumber>1&&$(".pageNav").append('<img class ="arrow" data-page-turn="-1" src="/assets/images/nav_backArrow.svg">'),i=1;i<=numOfPages;i++)$(".pageNav").append("<div data-page="+i+' class="pageNum">'+i+"</div>");pageNumber<numOfPages&&$(".pageNav").append('<img class ="arrow" data-page-turn="1" src="/assets/images/nav_forwardArrow.svg">')}function displayCards(a){$("#cardContainer").empty();for(var b=30*pageNumber-30;b<a.length&&30*pageNumber>b;b++){if(embedName=a[b].embedName,logo=a[b].logo,embedLink=a[b].embedLink?"":a[b].embedName,howto=a[b].howto?"<div class='videoPlaceholder'></div>":a[b].embedName,description=a[b].description?a[b].description:a[b].embedName,category=a[b].category?"":a[b].embedName,subject=a[b].subject?"":a[b].embedName,console.log("does it work"),null==a[b].tags)tags="";else for(var c=0;c<a[b].tags.length;c++)tags+='<p class="tag">'+a[b].tags[c]+"</p>";var d='<img src="'+logo+'">',e='<main class="col-md-4 card"></main>',f='<div class="logo col-md-offset-1">'+d+"</div>",g='<h4 class="title col-md-8">'+embedName+"</h4>",h='<div class="col-md-offset-1 video" src="'+howto+'"></div>',i='<p class="paragraph col-md-offset-1 col-md-10">'+description+"</p>",j=' <img class="col-md-offset-4 example" src="/assets/images/modalButton.png">',k='<h6 class="tags col-md-3">'+tags+"</h6>";$("#cardContainer").append(e),$(".card").last().append('<div class="row">'+f+g+'</div><div class="row">'+h+'</div><div class="row">'+i+'</div><div class="row">'+j+'</div><div class="row">'+k+"</div>")}}function displayCategory(a,b){categoryArray=[];for(var c=0;c<a.length;c++)a[c].category===b&&categoryArray.push(a[c]);return categoryArray}function displaySubject(a,b){subjectArray=[];for(var c=0;c<a.length;c++)a[c].subject===subject&&subjectArray.push(a[c]);for(var c=0;c<a.length;c++)null==a[c].subject&&subjectArray.push(a[c]);return subjectArray}function displayTag(a,b){tagArray=[],console.log(a);for(var c=0;c<a.length;c++)if(null!==a[c].tags)for(var d=0;d<a[c].tags.length;d++)a[c].tags[d]===b&&tagArray.push(a[c]);return tagArray}var embedName="",logo="",embedLink="",howto="",description="",category="",subject="",tags=[],pageNumber=1;$(document).ready(function(){$(".example").on("click",function(){$("#myModal").modal("show")}),$(".navDirectory").on("mouseenter",function(){$(this).find(".sub-nav").slideDown()}),$(".navDirectory").on("mouseleave",function(){$(this).find(".sub-nav").slideUp()}),$(".delete").on("click",function(){$("#myModal").modal("show")}),$(".newResourceButton").on("click",function(){$("#newModal").modal("show")}),$(".editButton").on("click",function(){$("#newModal").modal("show")}),$("body").on("click",".tag",function(){var a=$(this).text();getResourcesByTag(a)}),$("body").on("click",".pageNum",function(){pageNumber=$(this).data("page"),getResources()}),$("body").on("click",".arrow",function(){pageNumber+=$(this).data("page-turn"),getResources()}),getResources()});