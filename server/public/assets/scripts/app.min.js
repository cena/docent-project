/*! docentedu 2015-09-23 */
function getNewPage(){filteredArray.length>0?(console.log("if"),displayCards(filteredArray),makePages(filteredArray)):getResources(function(a){console.log("else"),displayCards(a),makePages(a)})}function getResources(a){filteredArray=[],$.ajax({type:"GET",dataType:"json",url:"/resources",success:function(b){b.resources.sort(compareAlphabetically),a(b.resources)}})}function filterResources(a,b,c){switch(filteredArray=[],a){case"category":for(var d=0;d<c.length;d++)c[d].category===b&&filteredArray.push(c[d]);break;case"subject":for(var d=0;d<c.length;d++)c[d].subject===b&&filteredArray.push(c[d]);for(var d=0;d<c.length;d++)null==c[d].subject&&filteredArray.push(c[d]);break;case"tag":for(var e=0;e<c.length;e++)if(null!=c[e].tags)for(var f=0;f<c[e].tags.length;f++)c[e].tags[f]===b&&filteredArray.push(c[e]);break;default:filteredArray=c}return filteredArray}function compareAlphabetically(a,b){return a.embedName<b.embedName?-1:a.embedName>b.embedName?1:0}function makePages(a){for($(".pageNav").empty(),numOfPages=Math.ceil(a.length/30),pageNumber>1&&$(".pageNav").append('<img class ="arrow" data-page-turn="-1" src="/assets/images/nav_backArrow.svg">'),i=1;i<=numOfPages;i++)$(".pageNav").append("<div data-page="+i+' class="pageNum">'+i+"</div>");pageNumber<numOfPages&&$(".pageNav").append('<img class ="arrow" data-page-turn="1" src="/assets/images/nav_forwardArrow.svg">')}function displayCards(a){$("#cardContainer").empty(),console.log(a);for(var b=30*pageNumber-30;b<a.length&&30*pageNumber>b;b++){var c="Description Coming Soon";if(console.log("i is: "+b),tags="",embedName=a[b].embedName,logo=a[b].logo,embedLink=a[b].embedLink?a[b].embedLink:a[b].embedName,howto=a[b].howto?a[b].howto:"",description=a[b].description?a[b].description:c,category=a[b].category?a[b].category:a[b].embedName,subject=a[b].subject?"":a[b].embedName,null!==a[b].tags&&0!==a[b].tags)for(var d=0;d<a[b].tags.length;d++)tags+='<p class="tag">'+a[b].tags[d]+"</p>";var e='<img class="logo" src="'+logo+'">',f='<main class="col-xs-offset-1 col-xs-12 col-sm-offset-3 col-sm-6 col-md-offset-1 col-md-4 col-lg-offset-0 card"></main>',g='<div class="col-xs-offset-1 col-xs-10">'+e+"</div>",h='<h3 class="category col-xs-offset-5 col-xs-10">'+category+"</h3>",i='<div class="col-md-offset-1"><iframe width="290" height="150" src="'+howto+'" frameborder="0" allowfullscreen></iframe></iframe></div>',j='<p class="paragraph col-md-offset-1 col-md-10">'+description+"</p>",k=' <i class="col-xs-offset-5 example fa fa-external-link fa-2x"></i>',l='<h6 class="tags col-md-3">'+tags+"</h6>";$("#cardContainer").append(f),$(".card").last().append('<div class="row">'+g+'</div><div class="row">'+h+'</div><div class="row">'+i+'</div><div class="row">'+j+'</div><div class="row">'+k+'</div><div class="row">'+l+"</div>"),$(".example").on("click",function(){$("#myModal").modal("show")})}}var embedName="",logo="",embedLink="",howto="",description="",category="",subject="",tags="",pageNumber=1,resources=[],value="",filteredArray=[];$(document).ready(function(){$(".navDirectory").on("mouseenter",function(){$(this).find(".sub-nav").slideDown()}),$(".navDirectory").on("mouseleave",function(){$(this).find(".sub-nav").slideUp()}),$(".delete").on("click",function(){$("#myModal").modal("show")}),$(".newResourceButton").on("click",function(){$("#newModal").modal("show")}),$(".editButton").on("click",function(){$("#newModal").modal("show")}),$("body").on("click",".pageNum",function(){pageNumber=$(this).data("page"),getNewPage()}),$("body").on("click",".arrow",function(){pageNumber+=$(this).data("page-turn"),getResources(function(a){filteredArray.length>0?(displayCards(filteredArray),makePages(filteredArray)):(displayCards(a),makePages(a))})}),getResources(function(a){displayCards(a),makePages(a),$("body").on("click",".tag",function(){return value=$(this).text(),filterResources("tag",value,a),displayCards(filteredArray),makePages(filteredArray),filteredArray}),$("body").on("click",".category",function(){return value=$(this).text(),filterResources("category",value,a),displayCards(filteredArray),makePages(filteredArray),pageNumber=1,filteredArray}),$("body").on("click",".subject",function(){return value=$(this).text(),filterResources("subject",value,a),displayCards(filteredArray),makePages(filteredArray),pageNumber=1,filteredArray})})});